{
  "Id": "274",
  "Title": "\u0022Automating Azure Cosmos DB Indexing with C# and Blob Storage\u0022",
  "Text": "C:\\Users\\adamh\\Downloads\\azure-search.pdfCosmosDb,        connectionString: cosmosConnectString,        container: new SearchIndexerDataContainer(\u0022hotels\u0022));    // The Azure Cosmos DB data source does not need to be deleted if it already exists,    // but the connection string might need to be updated if it has changed.    await indexerClient.CreateOrUpdateDataSourceConnectionAsync(cosmosDbDataSource);to automatically run again in the future.\r\nC#This example includes a simple try-catch block to report any errors that might occurduring execution.After the Azure Cosmos DB indexer has run, the search index will contain a full set ofsample hotel documents. However the rooms field for each hotel will be an empty array,since the Azure Cosmos DB data source omits room details. Next, the program will pullfrom Blob storage to load and merge the room data.\r\nSearchIndexer cosmosDbIndexer = new SearchIndexer(    name: \u0022hotel-rooms-cosmos-indexer\u0022,    dataSourceName: cosmosDbDataSource.Name,    targetIndexName: indexName){    Schedule = new IndexingSchedule(TimeSpan.FromDays(1))};// Indexers keep metadata about how much they have already indexed.// If we already ran the indexer, it \u0022remembers\u0022 and does not run again.\r\n// To avoid this, reset the indexer if it exists.try{    await indexerClient.GetIndexerAsync(cosmosDbIndexer.Name);    // Reset the indexer if it exists.    await indexerClient.ResetIndexerAsync(cosmosDbIndexer.Name);}catch (RequestFailedException ex) when (ex.Status == 404){    // If the indexer does not exist, 404 will be thrown. }await indexerClient.CreateOrUpdateIndexerAsync(cosmosDbIndexer);Console.WriteLine(\u0022Running Azure Cosmos DB indexer...\\n\u0022);try{    // Run the indexer.    await indexerClient.RunIndexerAsync(cosmosDbIndexer.Name);}catch (RequestFailedException ex) when (ex.Status == 429){    Console.WriteLine(\u0022Failed to run indexer: {0}\u0022, ex.\n"
}