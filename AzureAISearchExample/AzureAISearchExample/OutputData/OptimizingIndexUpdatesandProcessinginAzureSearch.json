{
  "Id": "867",
  "Title": "\u0022Optimizing Index Updates and Processing in Azure Search\u0022",
  "Text": "C:\\Users\\adamh\\Downloads\\azure-search.pdfIf you needupdates quickly, the supported approach is to push updates to the index whilesimultaneously updating the data source. For on-demand processing, we recommendthat you pace your requests in five-minute intervals or more, and run the indexer on aschedule.Conditions under which a document is processed twice is explained in the followingtimeline that notes each action and counter action. The following timeline illustrates theissue:Timeline(hh:mm:ss)EventIndexerHighWaterMarkComment00:01:00Write doc1 to data sourcewith eventual consistencynullDocument timestamp is 00:01:00.\r\n00:01:05Write doc2 to data sourcewith eventual consistencynullDocument timestamp is 00:01:05.00:01:10Indexer startsnullDocuments processed multiple timesExample of duplicate document processing with 30second bufferTimeline(hh:mm:ss)EventIndexerHighWaterMarkComment00:01:11Indexer queries for allchanges before 00:01:10;the replica that the indexerqueries happens to be onlyaware of doc2; only doc2 isretrievednullIndexer requests all changes beforestarting timestamp but actually receives asubset.\r\nThis behavior necessitates the lookback buffer period.00:01:12Indexer processes doc2 forthe first timenull00:01:13Indexer ends00:01:10High water mark is updated to startingtimestamp of current indexer execution. 00:01:20Indexer starts00:01:1000:01:21Indexer queries for allchanges between 00:00:40and 00:01:20; the replicathat the indexer querieshappens to be aware ofboth doc1 and doc2;retrieves doc1 and doc200:01:10Indexer requests for all changes betweencurrent high water mark minus the 30second buffer, and starting timestamp ofcurrent indexer execution.\n"
}