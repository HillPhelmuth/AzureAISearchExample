{
  "Id": "914",
  "Title": "\u0022Configuring Azure Blob Data Source for Indexers: Best Practices\u0022",
  "Text": "C:\\Users\\adamh\\Downloads\\azure-search.pdfA data source is defined as an independent resource sothat it can be used by multiple indexers.1. Create or update a data source to set its definition:JSON2. Set \u0022type\u0022 to \u0022azureblob\u0022 (required).3. Set \u0022credentials\u0022 to an Azure Storage connection string. The next section describesthe supported formats.\r\n4. Set \u0022container\u0022 to the blob container, and use \u0022query\u0022 to specify any subfolders.A data source definition can also include soft deletion policies, if you want the indexerto delete a search document when the source document is flagged for deletion.Indexers can connect to a blob container using the following connections.\r\nFull access storage account connection string{ \u0022connectionString\u0022 : \u0022DefaultEndpointsProtocol=https;AccountName=\u003Cyour storageaccount\u003E;AccountKey=\u003Cyour account key\u003E;\u0022 }You can get the connection string from the Storage account page in Azure portal by selectingAccess keys in the left navigation pane. Make sure to select a full connection string and not just akey.\r\nManaged identity connection string{ \u0022connectionString\u0022 : \u0022ResourceId=/subscriptions/\u003Cyour subscriptionID\u003E/resourceGroups/\u003Cyour resource groupname\u003E/providers/Microsoft.\r\nStorage/storageAccounts/\u003Cyour storage account name\u003E/;\u0022 }{     \u0022name\u0022 : \u0022my-blob-datasource\u0022,     \u0022type\u0022 : \u0022azureblob\u0022,     \u0022credentials\u0022 : { \u0022connectionString\u0022 : \u0022DefaultEndpointsProtocol=https;AccountName=\u003Caccount name\u003E;AccountKey=\u003Caccount key\u003E;\u0022 },     \u0022container\u0022 : { \u0022name\u0022 : \u0022my-container\u0022, \u0022query\u0022 : \u0022\u003Coptional-virtual-directory-name\u003E\u0022 } } Supported credentials and connection stringsManaged identity connection stringThis connection string doesn\u0027t require an account key, but you must have previously configured asearch service to connect using a managed identity. Storage account shared access signature** (SAS) connection string{ \u0022connectionString\u0022 : \u0022BlobEndpoint=https://\u003Cyouraccount\u003E.blob.core.windows.net/;SharedAccessSignature=?sv=2016-05-31\u0026sig=\u003Cthesignature\u003E\u0026spr=https\u0026se=\u003Cthe validity end time\u003E\u0026srt=co\u0026ss=b\u0026sp=rl;\u0022 }The SAS should have the list and read permissions on containers and objects (blobs in this case).\n"
}