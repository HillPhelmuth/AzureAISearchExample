{
  "Id": "208",
  "Title": "\u0022Creating Azure Search Client and Customizing Search Results\u0022",
  "Text": "C:\\Users\\adamh\\Downloads\\azure-search.pdfnet\u0027key = environment_vars[\u0022search_api_key\u0022]# Your index nameindex_name = \u0022good-books\u0022# Create Azure SDK clientsearch_client = SearchClient(endpoint, index_name, AzureKeyCredential(key))# returns obj like {authors: \u0027array\u0027, language_code:\u0027string\u0027}def read_facets(facetsString):    facets = facetsString.split(\u0022,\u0022)    output = {}    for x in facets:        if x.find(\u0022*\u0022) != -1:            newVal = x.\r\nreplace(\u0022*\u0022, \u0022\u0022)            output[newVal] = \u0022array\u0022        else:            output[x] = \u0022string\u0022    return output# creates filters in odata syntaxdef create_filter_expression(filter_list, facets):    i = 0    filter_expressions = []    return_string = \u0022\u0022    separator = \u0022 and \u0022    while i \u003C len(filter_list):        field = filter_list[i][\u0022field\u0022]        value = filter_list[i][\u0022value\u0022]        if facets[field] == \u0022array\u0022:            print(\u0022array\u0022)            filter_expressions.\r\nappend(f\u0022{field}/any(t: search.in(t, \u0027{value}\u0027, \u0027,\u0027))\u0022)        else:            print(\u0022value\u0022)            filter_expressions.append(f\u0022{field} eq \u0027{value}\u0027\u0022)        i \u002B= 1    return_string = separator.\r\njoin(filter_expressions)    return return_stringdef new_shape(docs):    old_api_shape = list(docs)    client_side_expected_shape = []    for item in old_api_shape:        new_document = {}        new_document[\u0022score\u0022] = item[\u0022@search.score\u0022]        new_document[\u0022highlights\u0022] = item[\u0022@search. highlights\u0022]        new_api_shape = {}        new_api_shape[\u0022id\u0022] = item[\u0022id\u0022]        new_api_shape[\u0022goodreads_book_id\u0022] = item[\u0022goodreads_book_id\u0022]        new_api_shape[\u0022best_book_id\u0022] = item[\u0022best_book_id\u0022]        new_api_shape[\u0022work_id\u0022] = item[\u0022work_id\u0022]        new_api_shape[\u0022books_count\u0022] = item[\u0022books_count\u0022]        new_api_shape[\u0022isbn\u0022] = item[\u0022isbn\u0022]\n"
}