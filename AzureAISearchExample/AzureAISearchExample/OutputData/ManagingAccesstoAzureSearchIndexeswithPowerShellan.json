{
  "Id": "1404",
  "Title": "\u0022Managing Access to Azure Search Indexes with PowerShell and CLI\u0022",
  "Text": "C:\\Users\\adamh\\Downloads\\azure-search.pdfazure.com/.defaultIn some scenarios, you may want to limit application\u0027s access to a single resource, suchas an index.The portal doesn\u0027t currently support role assignments at this level of granularity, but itcan be done with PowerShell or the Azure CLI.In PowerShell, use New-AzRoleAssignment, providing the Azure user or group name,and the scope of the assignment.\r\n1. Load the Azure and AzureAD modules and connect to your Azure account:PowerShell2. Add a role assignment scoped to an individual index:PowerShellIf built-in roles don\u0027t provide the right combination of permissions, you can create acustom role to support the operations you requirePOST https://\u003Cservice-name\u003E.\r\nsearch.windows.net/indexes/hotels-quickstart/docs/search?api-version=2020-06-30{ \u0022queryType\u0022: \u0022simple\u0022, \u0022search\u0022: \u0022motel\u0022, \u0022filter\u0022: \u0022\u0022, \u0022select\u0022: \u0022HotelName,Description,Category,Tags\u0022, \u0022count\u0022: true }Grant access to a single indexImport-Module -Name AzImport-Module -Name AzureADConnect-AzAccountNew-AzRoleAssignment -ObjectId \u003CobjectId\u003E \u0060    -RoleDefinitionName \u0022Search Index Data Contributor\u0022 \u0060    -Scope  \u0022/subscriptions/\u003Csubscription\u003E/resourceGroups/\u003Cresource-group\u003E/providers/Microsoft.\r\nSearch/searchServices/\u003Csearch-service\u003E/indexes/\u003Cindex-name\u003E\u0022Create a custom roleThis example clones Search Index Data Reader and then adds the ability to list indexesby name.\r\nNormally, listing the indexes on a search service is considered anadministrative right.These steps are derived from Create or update Azure custom roles using the Azureportal. Cloning from an existing role is supported in a search service page.These steps create a custom role that augments search query rights to includelisting indexes by name. Typically, listing indexes is considered an admin function.1. In the Azure portal, navigate to your search service.2. In the left-navigation pane, select Access Control (IAM).3. In the action bar, select Roles.4. Right-click Search Index Data Reader (or another role) and select Clone toopen the Create a custom role wizard.\n"
}