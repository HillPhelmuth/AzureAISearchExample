{
  "Id": "1050",
  "Title": "\u0022Configuring Image Processing for Azure Search Indexers: Best Practices\u0022",
  "Text": "C:\\Users\\adamh\\Downloads\\azure-search.pdfExtracted images are queued for image processing. Extracted text is queued for textprocessing, if applicable.Image processing requires image normalization to make images more uniform fordownstream processing. This second step occurs automatically and is internal to indexerprocessing. As a developer, you enable image normalization by setting the\u0022imageAction\u0022 parameter in indexer configuration.Image normalization includes the following operations:Large images are resized to a maximum height and width to make them uniformand consumable during skillset processing.For images that have metadata on orientation, image rotation is adjusted forvertical loading.Metadata adjustments are captured in a complex type created for each image.\r\nYoucannot turn off image normalization. Skills that iterate over images, such as OCR andimage analysis, expect normalized images.1. Create or Update an indexer to set the configuration properties:JSONConfigure indexers for image processing2. Set \u0022dataToExtract\u0022 to \u0022contentAndMetadata\u0022 (required).3. Verify that the \u0022parsingMode\u0022 is set to default (required).\r\nThis parameter determines the granularity of search documents created in theindex. The default mode sets up a one-to-one correspondence so that one blobresults in one search document. If documents are large, or if skills require smallerchunks of text, you can add Text Split skill that subdivides a document into pagingfor processing purposes.\r\nBut for search scenarios, one blob per document isrequired if enrichment includes image processing.4. Set \u0022imageAction\u0022 to enable the normalized_images node in an enrichment tree(required):\u0022generateNormalizedImages\u0022 to generate an array of normalized images aspart of document cracking.\u0022generateNormalizedImagePerPage\u0022 (applies to PDF only) to generate an arrayof normalized images where each page in the PDF is rendered to one outputimage. For non-PDF files, the behavior of this parameter is similar as if youhad set \u0022generateNormalizedImages\u0022. However, note that setting\u0022generateNormalizedImagePerPage\u0022 can make indexing operation lessperformant by design (especially for big documents) since several imageswould have to be generated.\n5. Optionally, adjust the width or height of the generated normalized images:\u0022normalizedImageMaxWidth\u0022 (in pixels). Default is 2000. Maximum value is10000.\u0022normalizedImageMaxHeight\u0022 (in pixels). Default is 2000. Maximum value is10000.\n"
}