{
  "Id": "1475",
  "Title": "\u0022Optimizing Security Filtering in Azure AI Search with search.in Function\u0022",
  "Text": "C:\\Users\\adamh\\Downloads\\azure-search.pdfIn Azure AI Search, a security filter is a regular OData filter that includes or excludes asearch result based on a matching value, except that in a security filter, the criteria is astring consisting of a security principal. There\u0027s no authentication or authorizationthrough the security principal. The principal is just a string, used in a filter expression, toinclude or exclude a document from the search results.There are several ways to achieve security filtering. One way is through a complicateddisjunction of equality expressions: for example, Id eq \u0027id1\u0027 or Id eq \u0027id2\u0027, and soforth.\r\nThis approach is error-prone, difficult to maintain, and in cases where the listcontains hundreds or thousands of values, slows down query response time by manyseconds.A better solution is using the search.in function for security filters, as described in thisarticle. If you use search.in(Id, \u0027id1, id2, ...\u0027) instead of an equality expression, youcan expect subsecond response times.\r\nAssemble source documents with the required content\uFF02Create a field for the principal identifiers\uFF02Push the documents to the search index for indexing\uFF02Query the index with the search.in filter function\uFF02About the security filter patternPrerequisitesThe field containing group or user identity must be a string with the \u0022filterable\u0022attribute. It should be a collection. It shouldn\u0027t allow nulls.Other fields in the same document should provide the content that\u0027s accessible tothat group or user. In the following JSON documents, the \u0022security_id\u0022 fieldscontain identities used in a security filter, and the name, salary, and marital statuswill be included if the identity of the caller matches the \u0022security_id\u0022 of thedocument.JSONIn the search index, within the field collection, you need one field that contains thegroup or user identity, similar to the fictitious \u0022security_id\u0022 field in the previous example.\n"
}