{
  "Id": "1369",
  "Title": "\u0022Creating Private Endpoints and DNS Zones in Azure PowerShell\u0022",
  "Text": "C:\\Users\\adamh\\Downloads\\azure-search.pdfAzure PowerShell$searchService = New-AzSearchService \u0060    -ResourceGroupName \u003Csearch-service-resource-group-name\u003E \u0060    -Name \u003Csearch-service-name\u003E \u0060    -Sku Standard \u0060    -Location \u0022West US\u0022 \u0060    -PartitionCount 1 -ReplicaCount 1 \u0060    -HostingMode Default \u0060    -PublicNetworkAccess Disabled# Create the subnet$subnetConfig = New-AzVirtualNetworkSubnetConfig \u0060    -Name \u003Csubnet-name\u003E \u0060    -AddressPrefix 10.\r\n1.0.0/24 \u0060    -PrivateEndpointNetworkPolicies Disabled # Create the virtual network$virtualNetwork = New-AzVirtualNetwork \u0060    -ResourceGroupName \u003Cvm-resource-group-name\u003E \u0060    -Location \u0022West US\u0022 \u0060    -Name \u003Cvirtual-network-name\u003E \u0060    -AddressPrefix 10.1.0.\r\n0/16 \u0060    -Subnet $subnetConfig# Create the private network connection$privateLinkConnection = New-AzPrivateLinkServiceConnection \u0060    -Name \u003Cprivate-link-name\u003E \u0060    -PrivateLinkServiceId $searchService.Id \u0060    -GroupId searchService# Create the private endpoint$privateEndpoint = New-AzPrivateEndpoint \u0060    -Name \u003Cprivate-endpoint-name\u003E \u0060    -ResourceGroupName \u003Cprivate-endpoint-resource-group-name\u003E \u0060    -Location \u0022West US\u0022 \u0060    -Subnet $virtualNetwork.\r\nsubnets[0] \u0060    -PrivateLinkServiceConnection $privateLinkConnectionFinally, create a private DNS Zone.Azure PowerShellFor more details on creating private endpoints in PowerShell, see this Private LinkQuickstartIn addition to creating a private endpoint connection, you can also Get, Set, andRemove the connection. Get-AzSearchPrivateEndpointConnection is used to retrieve a private endpointconnection and to see its status.Azure PowerShellSet-AzSearchPrivateEndpointConnection is used to update the connection. Thefollowing example sets a private endpoint connection to rejected:Azure PowerShell## Create private dns zone$zone = New-AzPrivateDnsZone \u0060    -ResourceGroupName \u003Cprivate-dns-resource-group-name\u003E \u0060    -Name \u0022privatelink.\n"
}